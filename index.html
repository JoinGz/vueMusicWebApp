<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<link rel="stylesheet" href="css/font-awesome.css">
		<link rel="stylesheet" href="css/app.css">
		<script src="../Vue/vue.min.js"></script>
		<script src="../Vue/vue-router.min.js"></script>
		<script src="../Vue/node_modules/vue-resource/dist/vue-resource.min.js"></script>
		<title>Gz's Music Player</title>
		<style>
			html {
				font-size: 16px;
			}
			
			body {
				margin: 0;
				padding: 0;
				background-image: url(img/body.png);
			}
			
			.change {
				display: flex;
				flex: 1;
				flex-direction: column;
			}
			
			.pp-enter-active,
			.pp-leave-active {
				transition: 0.5s all ease;
				opacity: 0.7;
				transform: translate3d(-100%, 0, 0);
			}
			
			.pp-enter {
				/*出现动画之前的状态*/
			}
			
			.pp-leave {
				/*离开动画之前的状态*/
			}
		</style>
	</head>

	<body class="page">
		<div id="music">
			<header class="header">
				<router-link to="/home">
					<i class="fa fa-home"></i>
				</router-link>
				<h1><i class="fa fa-music"></i> Songs</h1>
				<router-link to="/Gz">
					<i class="fa fa-list"></i>
				</router-link>
			</header>
			<transition name="pp">
				<keep-alive>
					<router-view></router-view>
				</keep-alive>
			</transition>

		</div>
		<template id="list">
			<div>
				<section class="main">
					<div class="list">
						<ol>
							<li v-for="(val,index) in songs">
								<router-link :to="val.id">
									<!--<a href="item.html">-->
									<span class="num">{{index+1}}</span>
									<div class="info">
										<h3 class="title">{{val.title}}</h3>
										<span class="artist">{{val.artist}}</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img :src="val.photo" alt="李克勤"></div>
									<!--</a>-->
								</router-link>
							</li>
						</ol>
					</div>
			</div>
			</section>
		</template>

		<template id="list1">
			<div>
				<section class="main">
					<div class="list">
						<ol>
							<li>
								<a href="item.html">
									<span class="num">003</span>
									<div class="info">
										<h3 class="title">送情郎(2010.12.11 德云二队张一元晚场)</h3>
										<span class="artist">岳云鹏</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img src="img/岳云鹏.jpg" alt="岳云鹏"></div>
								</a>
							</li>
							<li>
								<a href="item.html">
									<span class="num">003</span>
									<div class="info">
										<h3 class="title">送情郎(2010.12.11 德云二队张一元晚场)</h3>
										<span class="artist">岳云鹏</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img src="img/岳云鹏.jpg" alt="岳云鹏"></div>
								</a>
							</li>
							<li>
								<a href="item.html">
									<span class="num">003</span>
									<div class="info">
										<h3 class="title">送情郎(2010.12.11 德云二队张一元晚场)</h3>
										<span class="artist">岳云鹏</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img src="img/岳云鹏.jpg" alt="岳云鹏"></div>
								</a>
							</li>
							<li>
								<a href="item.html">
									<span class="num">003</span>
									<div class="info">
										<h3 class="title">送情郎(2010.12.11 德云二队张一元晚场)</h3>
										<span class="artist">岳云鹏</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img src="img/岳云鹏.jpg" alt="岳云鹏"></div>
								</a>
							</li>
							<li>
								<a href="item.html">
									<span class="num">003</span>
									<div class="info">
										<h3 class="title">送情郎(2010.12.11 德云二队张一元晚场)</h3>
										<span class="artist">岳云鹏</span>
									</div>
									<span class="duration">04:50</span>
									<div class="photo"><img src="img/岳云鹏.jpg" alt="岳云鹏"></div>
								</a>
							</li>

						</ol>
					</div>
			</div>
			</section>
		</template>
		<template id="Song">

			<section class="main">
				<div class="player">
					<div class="disc">
						<img src="img/李克勤.jpg" alt="李克勤">
						<span class="duration">4:20</span>
					</div>
					<h2 class="title">月半小夜曲</h2>
					<h3 class="artist">李克勤</h3>
					<div class="lyric">
						<p class="previous">人如天上的明月是不可拥有</p>
						<p class="current">情如曲过只遗留无可挽救再分别</p>
						<p class="next">为何只是失望填密我的空虚</p>
					</div>
					<div class="progressbar">
						<progress value="10" max="100"></progress>
						<input type="range" value="10">
					</div>
					<div class="controls">
						<button><i class="fa fa-retweet"></i></button>
						<button class="active"><i class="fa fa-backward"></i></button>
						<button class="active" @click="play"><i class="fa fa-play" id = "playi"></i></button>
						<button class="active"><i class="fa fa-forward"></i></button>
						<button class="active"><i class="fa fa-random"></i></button>
					</div>
					<audio src="杨坤 - 晚安.mp3" controls="controls" style="display: none;">
						Your browser does not support the audio tag.
					</audio>
				</div>
			</section>

		</template>
	</body>

	<script>
		window.onload = function() {

			var home = {
				template: "#list",
				mounted: function() {
					this.get1()
				},
				data: function() {
					return {
						songs: {},
						p: ""
					}
				},
				methods: {
					get1: function() {
						var t = this;
						this.$http.get('./new_file.php').then(function(res) {
							this.songs = JSON.parse(res.data.replace(/^.*?([\[{])/, "$1"));
						}, function() {
							alert("我靠，出错了")
						})
					}
				}
			}
			var home1 = {
				template: "#list1"
			}
			var Gz = {
				template: "<h3>I'm Gz</h3>"
			}
			var h = {
				template: "#Song",
				data: function() {
					return {
						playstate: true,
						songs: true
					}
				},
				methods: {
					play: function() {
						var playButton = document.querySelector("audio");
						var playi =document.querySelector("#playi");
//						console.log(playi)
						if(this.songs) {
							playButton.src = "杨坤 - 晚安.mp3";
							this.songs = !this.songs;
						}

						//						if(this.playstate) {
						//							playButton.play();
						//							this.playstate = !this.playstate;
						//						} else {
						//							playButton.pause();
						//							this.playstate = !this.playstate;
						//						}
						if(playButton.paused) {
							playButton.play();
							playi.className="fa fa-pause";
						} else {
							playButton.pause();
							playi.className="fa fa-play";
						}

					}

				}

			}
			var router1 = [{
				path: "/home",
				component: home
			}, {
				path: "/Gz",
				component: home1
			}, {
				path: "/:id",
				component: h
			}];
			var routers1 = new VueRouter({
				routes: router1
			})
			new Vue({ //放最后 妈蛋 ，弄半天
				el: "#music",
				router: routers1,
				data: {
					m: 123

				},
				methods: {

				}
			})
		}
	</script>

</html>